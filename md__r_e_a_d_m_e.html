<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OmniSketch: OmniSketch</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OmniSketch
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Oh my sketch!</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_omni_sketch.html">OmniSketch</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://n2-sys.github.io/OmniSketch/md__r_e_a_d_m_e.htmlhttps://github.com/N2-Sys/OmniSketch">OmniSketch</a> is a C++ framework for designing, simulating and testing sketch, a telemetry technique that aims at collecting streaming statistics. It is designed to be efficient, consistent and easy to use. Currently it is supported on Windows, Linux and MacOS.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Feature Overview</h1>
<ul>
<li><b>A wide variety of sketches</b> are implemented with minimal code. Some complicated sketches, such as ElasticSketch, are also supported. For a full list of the sketches available, check <a href="#table">this table</a>.</li>
<li><b>An auto-testing framework</b> that tests sketch performance and collects interested metrics with minimal configurations.</li>
<li><b>A generally applicable Counter Hierarchy framework</b> that enables a tremendous amount of space saving via hierarchical counter braiding, applicable to all value-based counters.</li>
<li><b>Pcap Parser</b> parses <code>.pcap</code> and <code>.pcapng</code> files to generate streaming data that interoperates with <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>. Data format of a streaming data record is customizable.</li>
<li><b>Flexible definitions of a flowkey</b> are available. Currently, 1-tuple, 2-tuple and 5-tuple are supported.</li>
<li><b>No redundant code has to be rewritten.</b> Designer can focus mainly on the sketch algorithm, and let the framework do the rest, e.g. data parsing and testing details.</li>
<li>Since sketching algorithms vary a lot, the framework includes only the most common methods. Do not panic! You can always write inject your own code and tell the framework to run it.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Download &amp; Build</h1>
<p>Download from GitHub release page: </p><div class="fragment"><div class="line">git clone --recurse-submodules https://github.com/N2-Sys/OmniSketch.git</div>
<div class="line">cd OmniSketch</div>
<div class="line">mkdir build; cd build</div>
</div><!-- fragment --><p>The project is built with CMake. If an additional module of PcapParser, which is capable of parsing <code>.pcap/.pcapng</code> files in quite a versatile manner and is interoperable with <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>, is requested, please define the <code>BUILD_PCAP_PARSER</code> macro by </p><div class="fragment"><div class="line">cmake .. -DBUILD_PCAP_PARSER=True</div>
</div><!-- fragment --><p>Upon defining this macro, CMake automatically checks for dependencies on <a href="https://github.com/seladb/PcapPlusPlus">PcapPlusPlus</a> and <a href="https://www.tcpdump.org">pcap</a> libraries, so MAKE SURE you have installed these libraries in advance. The default included directory of the PcapPlusPlus header files is <code>/usr/local/include/pcapplusplus</code> (which is certainly not true on Windows). To change this default searching path, provide to CMake a new argument: </p><div class="fragment"><div class="line">cmake .. -DBUILD_PCAP_PARSER=True -DPCPP_INCLUDE_PATH=[path on your system]</div>
<div class="line"># e.g. cmake .. -DBUILD_PCAP_PARSER=True -DPCPP_INCLUDE_PATH=/usr/local/include/pcapplusplus</div>
</div><!-- fragment --><p>In the simplest case, if PcapParser is not requested, the <code>PcapPlusPlus</code> and <code>pcap</code> libraries are never needed, so you can just build with </p><div class="fragment"><div class="line">cmake ..</div>
</div><!-- fragment --><p>Gee, it saves you a lot of work!</p>
<p>To verify that you indeed build a runnable copy of <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>, in the same directory (<code>build/</code>) run </p><div class="fragment"><div class="line">ctest</div>
</div><!-- fragment --><p>If you see the line </p><div class="fragment"><div class="line">100% tests passed, 0 tests failed out of 7</div>
</div><!-- fragment --><p>you can proceed to poke around <a class="el" href="namespace_omni_sketch.html">OmniSketch</a> and design your new sketches.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Design New Sketches</h1>
<p>Here is an overview of how to design your own sketch in <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>. For a detailed description, please check <a href="https://n2-sys.github.io/OmniSketch/overview.html">the docs</a>.</p>
<ol type="1">
<li>Sketch algorithm should be in <code>src/sketch/</code>. Suppose you add a file <code>XXX.h</code> to this directory.</li>
<li>Sketch testing procedure is defined in <code>src/sketch_test/</code>. You should name your testing file as <code>XXXTest.h</code> accordingly.</li>
<li>Add a new sketch target in <code>CMakeLists.txt</code>. This is done in a single line <code>add_user_sketch(YYY XXX)</code>.</li>
<li>Write down the sketch config in a toml file. The default config file is <code>src/sketch_config.toml</code>. All the sketch configs are user-defined, but typically should contain (though not required)<ul>
<li>Streaming data file</li>
<li>Format of the streaming data record</li>
<li>Metrics measured during testing</li>
<li>Sketch parameters</li>
<li>Other user-defined configs <blockquote class="doxtable">
<p>It is the user who controls what, where and how to parse in the config file. Omnisketch imposes no restrictions on how you organize the toml file and what you put in there. Fortunately, <a class="el" href="namespace_omni_sketch.html">OmniSketch</a> provides a rich set of tools to help you do it in just a couple of lines. </p>
</blockquote>
</li>
</ul>
</li>
<li>Goto the building directory <code>build/</code>, cmake and <code>make</code> it. (CMake is needed since a new target has just been added) From the time on, if the code is modified, only <code>make</code> is needed.</li>
<li>At this point, the sketch is compiled and linked. It is callable from the terminal with <code>./YYY -c config</code>. If no <code>-c</code> option is provided, <code>src/sketch_config.toml</code> is assumed to be the default config file. A possible output of Count Min Sketch runs as follows: <div class="fragment"><div class="line">terminal&gt; ./CM -c ../src/sketch_config.toml</div>
<div class="line">   INFO| Loading config from ../src/sketch_config.toml... @utils.cpp:62</div>
<div class="line">VERBOSE| Config loaded. @utils.cpp:76</div>
<div class="line">VERBOSE| Preparing test data... @data.h:718</div>
<div class="line">   INFO| Loading records from ../data/records.bin... @data.h:720</div>
<div class="line">VERBOSE| Records Loaded. @data.h:746</div>
<div class="line">DataSet: 1090120 records with 99999 keys (../data/records.bin)</div>
<div class="line">============     Count Min      ============</div>
<div class="line">  Mem Footprint: 1.52646 MB</div>
<div class="line">    Update Rate: 1853.95 Mpac/s</div>
<div class="line">     Query Rate: 1694.9 Mpac/s</div>
<div class="line">      Query ARE: 0.161831</div>
<div class="line">      Query AAE: 0.252943</div>
<div class="line">============================================</div>
</div><!-- fragment --></li>
<li>From now on, every time your sketch is about to run on different data and formats, or to collect some new statistics, all you have to do is simply modifying the config file. If the template header should be changed, you have to <code>make</code> a new driver.</li>
</ol>
<h1><a class="anchor" id="autotoc_md4"></a>
API Docs</h1>
<p>Please follow <a href="https://n2-sys.github.io/OmniSketch/annotated.html">this link</a>.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Tables of Sketches</h1>
<p>These are the sketches already implemented and tested.</p>
<p>Status: **h**ave, **c**hecked, checked but with **d**oubt, **t**ested. <a class="anchor" id="table"></a> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Status  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cm sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">count sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cu sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">bloom filter </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">counting bloom filter </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LD-sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MV-sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">hashpipe </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FM-sketch(PCSA) </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Linear Counting </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Kmin(KMV) </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Deltoid </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">flow radar </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sketch learn </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">elastic sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">univmon </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">nitro sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">reversible sketch </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Mrac </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">k-ary sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">seqHash </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TwoLevel </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">multi-resolution bitmap </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">lossy count </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">space saving </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HyperLogLog </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Misra-Gries </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fast Sketch </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CounterBraids </td><td class="markdownTableBodyNone">t  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HeavyKeeper </td><td class="markdownTableBodyNone">d  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
