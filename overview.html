<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OmniSketch: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OmniSketch
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Oh my sketch!</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('overview.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#concept">Key Concepts</a><ul><li class="level2"><a href="#flow">Flow</a></li>
<li class="level2"><a href="#metrics">Metrics</a></li>
</ul>
</li>
<li class="level1"><a href="#workflow">Workflow: A General Picture</a></li>
</ul>
</div>
<div class="textblock"><p>Now that we have installed <a class="el" href="namespace_omni_sketch.html">OmniSketch</a> on your local machine, we are already in a working state to build up new sketches. But before we actually begin to look at or write code in <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>, a few core concepts, along with a typical workflow, should be explained in a bit nuts and bolts.</p>
<h1><a class="anchor" id="concept"></a>
Key Concepts</h1>
<h2><a class="anchor" id="flow"></a>
Flow</h2>
<p>Flow is the minimal unit that we measure in the streaming scenario. Each packet transmitted in the network, no matter what it layer-2 procotol is or how many bits it have, belongs to a unique flow. Each flow marks one specific connection between a client and a server, so it always lasts for some time and its liveness is manifested by nothing but a series of packets that shift between the source and destination. The reason why we are only interested in measuring a flow, instead of any packets alone, should now be clear: The long-term QoS (Quality of Service) is what we ultimately care about.</p>
<p>The definition of a flow, as you may have expected, is quite flexible. Depending on the usage, one defines a flow by a set of fields in headers at various layers. For example, if you are to detect the status of a Internet host, you may just group all packets emanating from that host into a single flow. I.e., the flow is given by a 1-tuple \(\langle \textrm{src IP}\rangle\). But to achieve a finer granularity on latency per host pair, one may choose a 2-tuple \(\langle \textrm{src IP}, \textrm{dst IP}\rangle\) as the identification of a flow. But this is not the end. Since the transport layer protocol can indeed impact the user exprience of a flow by introducing congestion control mechanism or being endowed with a level of priority when its packets are queued, sometimes one takes a 5-tuple definition \(\langle \textrm{src IP}, \textrm{dst IP}, \textrm{src port}, \textrm{dst port}, \textrm{layer-4 protocol}\rangle\).</p>
<p>All the three versions of definition aforementioned are supported in <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>. The use of these definitions are so prevalent in practice that <a class="el" href="namespace_omni_sketch.html">OmniSketch</a> currently only considers to support these three. You are highly likely to be content with what we have offered so far, but in case that you face inconvenience, please do inform us via email or github. For clarity, we summarize the definition of a flow as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Definition </th><th class="markdownTableHeadLeft">Length of the Identification  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">\(\langle \textrm{src IP}\rangle\) </td><td class="markdownTableBodyLeft">4  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">\(\langle \textrm{src IP}, \textrm{dst IP}\rangle\) </td><td class="markdownTableBodyLeft">8 (4+4)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">\(\langle \textrm{src IP}, \textrm{dst IP}, \textrm{src port}, \textrm{dst port}, \textrm{layer-4 protocol}\rangle\) </td><td class="markdownTableBodyLeft">13 (4+4+2+2+1)  </td></tr>
</table>
<p>Flow, from a different angle, is also what separates the data and the algorithm. Be aware that the raw <code>.pcap</code> or <code>.pcapng</code> file is not usable with <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>, since such file (usually generated by tools like <a href="https://www.wireshark.org/">Wireshark</a> or <a href="https://www.tcpdump.org/">tcpdump</a>) is typically large and contains so many uninterested content such as the application layer payload and pcap-specific <a href="https://tools.ietf.org/id/draft-gharris-opsawg-pcap-00.html">packet records</a>. So we add an additional model here, which is properly named as PcapParser, that can be customized to consume a capture file and output in a binary format a succinct file comprised of only packet length, timestamp and flow key information. Any point since <a class="el" href="namespace_omni_sketch.html">OmniSketch</a> is running, all it knows comes from that binary file.</p>
<p>We will not digress to the usage of PcapParser right now. Desultory readers may just skip to read the part on PcapParser.</p>
<h2><a class="anchor" id="metrics"></a>
Metrics</h2>
<p>From what we care about the flow comes the notion of metrics. Metrics are exactly what we want to get out of sketch algorithm eventually. Collecting information per packet is formidable given the line rate and link bandwidth, and is also less intuitive since otherwise, there were going to be too many data! The purpose of a sketch is to provide a summary of the flow-wise statistics, such as flow size (i.e., the number of bytes in the flow), heavy hitters and so on, using only a severely restricted amount of space. Accuracy must be compromised to a pre-agreed \(1-\epsilon\) rather than \(100\%\) in compliance with the fundamental theorem of the information theory.</p>
<p>Good news is that the metrics we are looking for can be categorized into only a handful of types, and the process of collecting these metrics on various sketches are all alike. This drives development of the auto-testing framework of <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>: Users invoke testing routines in a way they want their sketch to be tested, and each test routine collects a subset of all available metrics inside. User can instruct which metrics to include and display by fiddling with the sketch configurations.</p>
<p>Here is a complete list of all available metrics in <a class="el" href="namespace_omni_sketch.html">OmniSketch</a>. Again, if you find your interested metric is not included, please contact us via email or github. We would appreciate your feedback.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Metric </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>SIZE</code> </td><td class="markdownTableBodyLeft">size (in bytes) of the sketch  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>TIME</code> </td><td class="markdownTableBodyLeft">running time (in microseconds, 1e-6s) of the sketch on a test routine  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>RATE</code> </td><td class="markdownTableBodyLeft">processing rate (packets per second)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>ARE</code> </td><td class="markdownTableBodyLeft">average relative error  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>AAE</code> </td><td class="markdownTableBodyLeft">average absolute error  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>ACC</code> </td><td class="markdownTableBodyLeft">correct rate  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>TP</code> </td><td class="markdownTableBodyLeft">true positive rate  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>FP</code> </td><td class="markdownTableBodyLeft">false positive rate  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>TN</code> </td><td class="markdownTableBodyLeft">true negative rate  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>FN</code> </td><td class="markdownTableBodyLeft">false negative rate  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>PRC</code> </td><td class="markdownTableBodyLeft">precision rate  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>RCL</code> </td><td class="markdownTableBodyLeft">recall rate  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>F1</code> </td><td class="markdownTableBodyLeft">harmonic mean of precision &amp; recall (F-one, not F-ell)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>DIST</code> </td><td class="markdownTableBodyLeft">distribution of the error  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>PODF</code> </td><td class="markdownTableBodyLeft">portion of the desired flow (i.e., whose error is below a threshold)  </td></tr>
</table>
<h1><a class="anchor" id="workflow"></a>
Workflow: A General Picture</h1>
<p>Glad you have finished reading main body of the overview! Now it is the time that we summarize a bit and look into the workflow.</p>
<p>The general workflow is nicely depicted in the following. </p><div class="image">
<img src="workflow.png" alt="" width="70%"/>
</div>
<p> We have learnt that once a capture file goes through Pcap Parser, it contains only flowkey-associated information. Testing routines run atop the sketch algorithm, read the configurations and output metrics that quantitatively measures the goodness of a sketch. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
